(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76,156],{283:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>d});var s=r(5155),l=r(2115),n=r(5404),a=r(6104),o=r(9086);let i=(0,l.createContext)({user:null,userProfile:null,loading:!0,profileLoading:!1,signIn:async()=>{},signUp:async()=>{},logout:async()=>{},resetPassword:async()=>{},updateUserProfile:async()=>{},updateEmailConsent:async()=>{},refreshUserProfile:async()=>{}}),c=()=>(0,l.useContext)(i);function d(e){let{children:t}=e,[c,d]=(0,l.useState)(null),[x,m]=(0,l.useState)(null),[u,h]=(0,l.useState)(!0),[p,g]=(0,l.useState)(!1),[b,f]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{console.log("\uD83D\uDD25 AuthContext useEffect 시작");let e=setTimeout(()=>{console.log("⚠️ 5초 후에도 로딩 중 - 강제 로딩 해제"),h(!1)},5e3),t=(0,n.hg)(a.j,async t=>{if(console.log("\uD83D\uDD04 onAuthStateChanged 실행:",null==t?void 0:t.uid),clearTimeout(e),b||y)return void console.log("⏸️ 회원가입/로그인 과정 중이므로 onAuthStateChanged 무시");if(t){console.log("\uD83D\uDC64 사용자 감지됨:",t.uid),g(!0),d(t);try{console.log("\uD83D\uDCCB getUserProfile 호출 시작");let e=await (0,o.VM)(t.uid);console.log("\uD83D\uDCCB getUserProfile 결과:",e),e&&"approved"===e.status?(m(e),console.log("✅ 승인된 사용자 프로필 설정 완료")):e&&"approved"!==e.status?(console.log("❌ 승인되지 않은 사용자 - 로그아웃 처리"),d(null),m(null),await (0,n.CI)(a.j)):(console.log("⚠️ 프로필 없음 - user 상태는 유지, userProfile은 null"),m(null))}catch(e){console.error("\uD83D\uDCA5 onAuthStateChanged 에러:",e),console.log("\uD83D\uDD27 에러 발생했지만 user 상태는 유지"),m(null),console.log("\uD83D\uDD0D 에러 상세:",e instanceof Error?e.message:String(e))}finally{g(!1)}}else console.log("\uD83D\uDEAA 로그아웃 상태"),d(null),m(null),g(!1);console.log("\uD83C\uDFC1 AuthContext 처리 완료 - 로딩 해제"),h(!1)});return()=>{clearTimeout(e),t()}},[b,y]);let v=async(e,t)=>{try{j(!0),console.log("로그인 시도 시작");let r=(await (0,n.x9)(a.j,e,t)).user;console.log("Firebase 인증 성공, UID:",r.uid),console.log("사용자 상태 확인 시작");let s=null,l=null,i=!1;try{if(console.log("getUserProfile 호출 시작"),s=await (0,o.VM)(r.uid),console.log("getUserProfile 성공, 결과:",s),s&&"approved"===s.status){console.log("승인된 사용자 로그인 성공"),d(r),m(s),j(!1);return}}catch(e){console.error("getUserProfile 에러 (무시하고 계속):",e),i=!0}if(!s)try{console.log("getPendingUser 호출 시작"),l=await (0,o.bN)(r.uid),console.log("getPendingUser 성공, 결과:",l)}catch(e){console.error("getPendingUser 에러 (무시하고 계속):",e),i=!0}if(console.log("❌ 승인되지 않은 사용자, 로그아웃 처리"),await (0,n.CI)(a.j),j(!1),s)if("pending"===s.status)throw Error("승인 대기 중입니다. 관리자 승인 후 로그인할 수 있습니다.");else if("rejected"===s.status)throw Error("회원가입이 승인되지 않았습니다. 관리자에게 문의해주세요.");else throw Error("알 수 없는 사용자 상태입니다. 관리자에게 문의해주세요.");if(l)throw Error("승인 대기 중입니다. 관리자 승인 후 로그인할 수 있습니다.");if(i)throw Error("로그인 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.");else throw Error("등록되지 않은 계정입니다. 회원가입을 진행해주세요.")}catch(e){throw console.error("signIn 에러:",e),j(!1),e}},w=async(e,t,r,s,l)=>{try{f(!0);let i=!1;try{let{user:c}=await (0,n.eJ)(a.j,e,t);await (0,n.r7)(c,{displayName:r}),await (0,o.EE)({uid:c.uid,email:c.email,displayName:r,school:s,authProvider:"email",emailConsent:(null==l?void 0:l.optional)||null,consentDate:(null==l?void 0:l.optional)?new Date:null}),console.log("✅ 회원가입 성공 - pending user 생성 완료"),i=!0}catch(c){if(c instanceof Error&&"code"in c&&"auth/email-already-in-use"===c.code){console.log("\uD83D\uDD04 Firebase Auth 사용자는 존재하지만 Firestore 데이터 확인 중...");let{user:c}=await (0,n.x9)(a.j,e,t);console.log("\uD83D\uDD0D 기존 사용자 UID:",c.uid);let d=await (0,o.VM)(c.uid),x=await (0,o.bN)(c.uid);if(d||x)throw console.log("❌ 이미 등록된 사용자 - 기존 데이터 존재"),f(!1),await (0,n.CI)(a.j).catch(e=>console.error("로그아웃 에러:",e)),Error("이미 등록된 계정입니다.");console.log("✅ Firestore 데이터 없음 - 새로 생성"),await (0,n.r7)(c,{displayName:r}),await (0,o.EE)({uid:c.uid,email:c.email,displayName:r,school:s,authProvider:"email",emailConsent:(null==l?void 0:l.optional)||null,consentDate:(null==l?void 0:l.optional)?new Date:null}),console.log("✅ 새로운 pending user 생성 완료"),i=!0}else throw f(!1),c}if(i){f(!1);try{await (0,n.CI)(a.j),console.log("✅ 회원가입 후 로그아웃 완료")}catch(e){console.error("⚠️ 로그아웃 에러 (무시):",e)}}}catch(e){throw f(!1),e}},N=async()=>{try{await (0,n.CI)(a.j),d(null),m(null),console.log("로그아웃 완료")}catch(e){throw console.error("로그아웃 에러:",e),e}},k=async e=>{try{await (0,n.J1)(a.j,e)}catch(e){throw e}},C=async()=>{if(c)try{g(!0),console.log("\uD83D\uDD04 강제로 userProfile 새로고침 시도");let e=await (0,o.VM)(c.uid);console.log("\uD83D\uDD04 강제 새로고침 결과:",e),e&&"approved"===e.status?(m(e),console.log("✅ userProfile 새로고침 성공")):(console.log("❌ 승인되지 않은 사용자 또는 프로필 없음"),m(null))}catch(e){console.error("❌ userProfile 새로고침 실패:",e)}finally{g(!1)}},F=async e=>{try{if(!c||!x)throw Error("사용자 정보가 없습니다.");e.displayName&&await (0,n.r7)(c,{displayName:e.displayName});let{updateDoc:t,doc:s}=await Promise.resolve().then(r.bind(r,5317)),{db:l}=await Promise.resolve().then(r.bind(r,6104)),a=s(l,"users",c.uid);await t(a,e),m(t=>t?{...t,...e}:null)}catch(e){throw e}},S=async e=>{try{if(!c)throw Error("사용자 정보가 없습니다.");console.log("\uD83D\uDD04 AuthContext updateEmailConsent 호출:",{사용자:c.uid,새로운_동의_상태:e}),await (0,o.ih)(c.uid,e),m(t=>t?{...t,emailConsent:!!e||null,consentDate:e?new Date:null}:null),console.log("✅ AuthContext updateEmailConsent 완료")}catch(e){throw console.error("❌ AuthContext updateEmailConsent 실패:",e),e}};return(0,s.jsx)(i.Provider,{value:{user:c,userProfile:x,loading:u,profileLoading:p,signIn:v,signUp:w,logout:N,resetPassword:k,updateUserProfile:F,updateEmailConsent:S,refreshUserProfile:C},children:t})}},2639:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var s=r(5155),l=r(6874),n=r.n(l),a=r(9911),o=r(4717),i=r(2115),c=r(9086);function d(){let[e,t]=(0,i.useState)(null),[r,l]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{(async()=>{try{await (0,c.Jx)();let e=await (0,c.WT)();t(e)}catch(e){console.error("방문자 카운터 초기화 실패:",e)}finally{l(!1)}})()},[]),r)?(0,s.jsx)("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:(0,s.jsx)("span",{children:"방문자 수 로딩 중..."})}):e?(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{children:"Today:"}),(0,s.jsx)("span",{className:"font-semibold text-white",children:e.todayVisits.toLocaleString()})]}),(0,s.jsx)("div",{className:"text-white/30",children:"|"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsx)("span",{className:"font-semibold text-white",children:e.totalVisits.toLocaleString()})]})]}):null}function x(){return(0,s.jsx)("footer",{className:"bg-[#66ae7d] mt-auto",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"G-DEAL"}),(0,s.jsxs)("p",{className:"text-white/80 text-sm leading-relaxed",children:["교육 혁신을 위한 플랫폼",(0,s.jsx)("br",{}),"더 나은 교육을 위한 소통과 나눔의 공간"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"바로가기"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(n(),{href:"https://docs.google.com/document/u/3/d/e/2PACX-1vTcwZvodisKxTNOgLJH80iYsnHMlf6DkAPoi2j7egl1DYUFSPGCRGtajgXI-d-Y5Wz9NAzM1yD7w431/pub",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-white/80 hover:text-white transition-colors text-sm",children:[(0,s.jsx)(o.yB7,{className:"text-lg"}),(0,s.jsx)("span",{children:"G-DEAL 정관"})]}),(0,s.jsxs)(n(),{href:"https://docs.google.com/forms/d/e/1FAIpQLSeFRB4DL6X3I77R9ksukcSvs-f-B0zVcxduF2_LPNxdQXDTGA/viewform",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-white/80 hover:text-white transition-colors text-sm",children:[(0,s.jsx)(o.yB7,{className:"text-lg"}),(0,s.jsx)("span",{children:"활동 신청서"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"소셜 미디어"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(n(),{href:"https://pf.kakao.com/_LxbsHG",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-10 h-10 hover:scale-105 transition-transform",title:"카카오톡 채널",children:(0,s.jsx)("img",{src:"/kakao-channel-logo.png",alt:"카카오톡 채널",className:"w-10 h-10 object-contain"})}),(0,s.jsx)(n(),{href:"https://www.instagram.com/gdeal.io",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full hover:from-purple-600 hover:to-pink-600 transition-colors",title:"인스타그램",children:(0,s.jsx)(a.ao$,{className:"text-lg"})})]})]})]}),(0,s.jsx)("div",{className:"border-t border-white/20 mt-8 pt-8",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-4",children:[(0,s.jsx)("div",{className:"text-sm text-white/70",children:"\xa9 2024 G-DEAL. All rights reserved."}),(0,s.jsx)(d,{})]}),(0,s.jsx)("div",{className:"text-sm text-white/70",children:"교육의 혁신, G-DEAL과 함께"})]})})]})})}},2942:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var s=r(5155),l=r(2115),n=r(5695),a=r(6681);function o(e){let{onToggleForm:t,onClose:r}=e,[n,o]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[d,x]=(0,l.useState)(!1),[m,u]=(0,l.useState)(""),[h,p]=(0,l.useState)(!1),[g,b]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1),[j,v]=(0,l.useState)(""),{signIn:w,resetPassword:N}=(0,a.A)(),k=async e=>{e.preventDefault(),u(""),x(!0);try{await w(n,i),null==r||r()}catch(e){e instanceof Error?u(e.message):u(S((null==e?void 0:e.code)||"unknown"))}finally{x(!1)}},C=async e=>{if(e.preventDefault(),!j.trim())return void u("이메일을 입력해주세요.");u(""),b(!1),p(!0);try{await N(j),b(!0),y(!1),v("")}catch(e){e instanceof Error?u(e.message):u(T((null==e?void 0:e.code)||"unknown"))}finally{p(!1)}},F=()=>{y(!1),v(""),u(""),b(!1)},S=e=>{switch(e){case"auth/user-not-found":return"등록되지 않은 이메일입니다.";case"auth/wrong-password":return"비밀번호가 올바르지 않습니다.";case"auth/invalid-email":return"유효하지 않은 이메일 주소입니다.";case"auth/too-many-requests":return"너무 많은 로그인 시도가 있었습니다. 잠시 후 다시 시도해주세요.";default:return"로그인 중 오류가 발생했습니다."}},T=e=>{switch(e){case"auth/invalid-email":return"유효하지 않은 이메일 주소입니다.";case"auth/user-not-found":return"해당 이메일로 등록된 계정이 없습니다.";case"auth/too-many-requests":return"너무 많은 요청이 있었습니다. 잠시 후 다시 시도해주세요.";default:return"비밀번호 재설정 이메일 전송 중 오류가 발생했습니다."}};return(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"로그인"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"G-DEAL에 오신 것을 환영합니다"})]}),(0,s.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[m&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:m})}),g&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-sm text-green-800",children:"비밀번호 재설정 이메일이 전송되었습니다. 이메일을 확인해주세요."})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"이메일"}),(0,s.jsx)("input",{type:"email",id:"email",value:n,onChange:e=>o(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"이메일을 입력하세요"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호"}),(0,s.jsx)("input",{type:"password",id:"password",value:i,onChange:e=>c(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"비밀번호를 입력하세요"})]}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-[#66ae7d] text-white py-2 px-4 rounded-md hover:bg-[#497e56] focus:outline-none focus:ring-2 focus:ring-[#66ae7d] disabled:opacity-50",children:d?"로그인 중...":"로그인"})]}),(0,s.jsxs)("div",{className:"mt-6 text-center space-y-3",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["계정이 없으신가요?"," ",(0,s.jsx)("button",{onClick:t,className:"text-[#66ae7d] hover:text-[#497e56] font-medium",children:"회원가입"})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["비밀번호를 잊으셨나요?"," ",(0,s.jsx)("button",{onClick:()=>{y(!0),u(""),b(!1)},className:"text-[#66ae7d] hover:text-[#497e56] font-medium",children:"비밀번호 찾기"})]})]}),f&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 relative",children:[(0,s.jsx)("button",{onClick:F,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"비밀번호 찾기"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"가입하신 이메일을 입력해주세요"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"(스팸메일함도 확인해주세요)"})]}),(0,s.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[m&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:m})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"resetEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"이메일"}),(0,s.jsx)("input",{type:"email",id:"resetEmail",value:j,onChange:e=>v(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"가입하신 이메일을 입력하세요"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:F,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"취소"}),(0,s.jsx)("button",{type:"submit",disabled:h,className:"flex-1 bg-[#66ae7d] text-white py-2 px-4 rounded-md hover:bg-[#497e56] focus:outline-none focus:ring-2 focus:ring-[#66ae7d] disabled:opacity-50",children:h?"전송 중...":"이메일 전송"})]})]}),(0,s.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-md border",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"\uD83D\uDCA1 이메일을 잊으셨나요?"}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["관리자에게 문의하시거나",(0,s.jsx)("br",{}),"새로운 계정을 생성해주세요."]})]})})]})})]})}function i(e){let{isOpen:t,onClose:r,onAgree:n}=e,[a,o]=(0,l.useState)(!1),[i,c]=(0,l.useState)(!1);return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-start justify-center z-50 overflow-y-auto py-8",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,s.jsx)("div",{className:"sticky top-0 bg-white border-b px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"이용약관 및 개인정보처리방침 동의"}),(0,s.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,s.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b",children:(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"필수 동의"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"개인정보 수집\xb7이용 동의 (필수)"}),(0,s.jsx)("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-700 max-h-64 overflow-y-auto",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"font-semibold mb-1",children:"본 단체는 「개인정보보호법」 등 관련 법령에 따라 회원님의 개인정보를 안전하게 보호하며, 회원가입 및 서비스 제공을 위하여 다음과 같이 개인정보를 수집\xb7이용합니다."})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[개인정보의 처리 목적]"}),(0,s.jsx)("p",{children:"단체는 회원 가입 및 활동 관리, 단체 관련 서비스 제반의 제공, 행사\xb7캠페인 운영 안내 등을 위하여 개인정보를 처리합니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[수집하는 개인정보 항목]"}),(0,s.jsx)("p",{children:"가. 필수항목: 이름, 이메일, 비밀번호"}),(0,s.jsx)("p",{children:"나. 선택항목: 이메일을 통한 행사/캠페인 안내 및 뉴스레터 수신 여부"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[개인정보의 보유 및 이용기간]"}),(0,s.jsx)("p",{children:"원칙적으로 회원 탈퇴 시까지 보유\xb7이용하며, 탈퇴 즉시 파기합니다."}),(0,s.jsx)("p",{children:"다만, 법령에 따라 보존이 필요한 경우에는 해당 법령에서 정한 기간까지 보관합니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[개인정보의 제3자 제공]"}),(0,s.jsx)("p",{children:"단체는 원칙적으로 회원님의 개인정보를 제3자에게 제공하지 않습니다."}),(0,s.jsx)("p",{children:"다만, 법령에 근거하거나 별도의 동의를 받은 경우에만 제공할 수 있습니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[개인정보 처리 위탁]"}),(0,s.jsx)("p",{children:"단체는 원활한 서비스 제공과 조직의 운영 상 필요한 일부 업무를 외부에 위탁할 수 있으며, 이 경우 개인정보보호법 제26조에 따라 안전성 확보 조치를 이행합니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[개인정보의 파기]"}),(0,s.jsx)("p",{children:"보유기간이 경과하거나 처리 목적이 달성된 경우 지체 없이 파기합니다."}),(0,s.jsx)("p",{children:"전자적 파일은 복구할 수 없도록 삭제하고, 종이 문서는 분쇄 또는 소각하여 파기합니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[정보주체의 권리]"}),(0,s.jsx)("p",{children:"회원은 언제든지 본인의 개인정보에 대해 열람, 정정\xb7삭제, 처리정지 요구를 할 수 있습니다."}),(0,s.jsx)("p",{children:"요청은 이메일 또는 서면으로 할 수 있으며, 단체는 10일 이내에 이를 처리합니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[개인정보의 안전성 확보조치]"}),(0,s.jsx)("p",{children:"단체는 개인정보를 안전하게 관리하기 위하여 비밀번호 암호화, 접근권한 관리, 서버 담당자 지정 및 관련 교육 등의 조치를 취합니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[개인정보 보호책임자]"}),(0,s.jsx)("p",{children:"- 성명: 박병준"}),(0,s.jsx)("p",{children:"- 직책: 개인정보보호책임자"}),(0,s.jsx)("p",{children:"- 연락처: pbj@gdeal.io"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[권익침해 구제방법]"}),(0,s.jsx)("p",{children:"회원은 개인정보 침해로 인한 피해구제를 위하여 다음 기관에 분쟁해결이나 상담을 신청할 수 있습니다."}),(0,s.jsx)("p",{children:"- 개인정보분쟁조정위원회: 1833-6972 (www.kopico.go.kr)"}),(0,s.jsx)("p",{children:"- 개인정보침해신고센터: 118 (privacy.kisa.or.kr)"}),(0,s.jsx)("p",{children:"- 대검찰청: 1301 (www.spo.go.kr)"}),(0,s.jsx)("p",{children:"- 경찰청: 182 (ecrm.cyber.go.kr)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:"[개인정보 처리방침 변경]"}),(0,s.jsx)("p",{children:"본 방침은 2025년 9월 1일부터 적용됩니다. 이후 방침의 변경 사항은 홈페이지를 통해 공개합니다."})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"requiredAgreement",checked:a,onChange:e=>o(e.target.checked),className:"mt-1"}),(0,s.jsxs)("label",{htmlFor:"requiredAgreement",className:"text-sm text-gray-700",children:["나는 본 단체가 위 이용 방침에 의거, 개인정보(이름, 이메일, 비밀번호)를 수집\xb7이용하는 것에 ",(0,s.jsx)("strong",{className:"text-red-600",children:"동의합니다."})]})]}),(0,s.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"※ 필수 항목 동의가 없을 경우 회원가입이 불가합니다."})]})]}),(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,s.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b",children:(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"선택 동의"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"마케팅 정보 수신 동의 (선택)"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-700",children:[(0,s.jsx)("p",{className:"mb-2",children:"G-DEAL에서 제공하는 다양한 소식을 이메일로 받아보실 수 있습니다:"}),(0,s.jsx)("p",{className:"mb-1",children:"- 교육 관련 행사 및 캠페인 안내"}),(0,s.jsx)("p",{className:"mb-1",children:"- 새로운 연수 프로그램 소식"}),(0,s.jsx)("p",{className:"mb-1",children:"- 뉴스레터 및 정보 제공 서비스"})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"optionalAgreement",checked:i,onChange:e=>c(e.target.checked),className:"mt-1"}),(0,s.jsx)("label",{htmlFor:"optionalAgreement",className:"text-sm text-gray-700",children:"나는 단체가 이메일을 통해 행사, 캠페인 안내 및 뉴스레터를 발송하는 것에 동의합니다."})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"※ 동의하지 않아도 회원가입 및 서비스 이용에는 제한이 없습니다."})]})]})]}),(0,s.jsx)("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4",children:(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:r,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"취소"}),(0,s.jsx)("button",{onClick:()=>{if(!a)return void alert("필수 동의 항목을 확인해주세요.");n({required:a,optional:i})},disabled:!a,className:"flex-1 bg-[#66ae7d] text-white py-2 px-4 rounded-md hover:bg-[#497e56] focus:outline-none focus:ring-2 focus:ring-[#66ae7d] disabled:opacity-50 disabled:cursor-not-allowed",children:"다음 단계로"})]})})]})}):null}function c(e){let{onToggleForm:t,onClose:r}=e,[n,o]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[x,m]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[b,f]=(0,l.useState)(!1),[y,j]=(0,l.useState)(""),[v,w]=(0,l.useState)(!0),[N,k]=(0,l.useState)(null),{signUp:C}=(0,a.A)(),F=async e=>{if(e.preventDefault(),j(""),c!==x)return void j("비밀번호가 일치하지 않습니다.");if(c.length<6)return void j("비밀번호는 최소 6자 이상이어야 합니다.");if(!p)return void j("교육기관 구분을 선택해주세요.");f(!0);try{await C(n,c,u.trim(),p,N),alert("회원가입이 완료되었습니다. 승인 후 로그인 가능합니다."),null==r||r()}catch(e){e instanceof Error?j(e.message):(null==e?void 0:e.code)?j(S(e.code)):j("회원가입 중 오류가 발생했습니다.")}finally{f(!1)}},S=e=>{switch(e){case"auth/email-already-in-use":return"이미 사용 중인 이메일 주소입니다.";case"auth/invalid-email":return"유효하지 않은 이메일 주소입니다.";case"auth/weak-password":return"비밀번호가 너무 약합니다.";default:return"회원가입 중 오류가 발생했습니다."}};return v||!N?(0,s.jsx)(i,{isOpen:v,onClose:()=>{w(!1),null==r||r()},onAgree:e=>{k(e),w(!1)}}):(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"회원가입"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"G-DEAL과 함께 시작하세요"})]}),(0,s.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[y&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:y})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"이름 *"}),(0,s.jsx)("input",{type:"text",id:"displayName",value:u,onChange:e=>h(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"이름을 입력하세요"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"educationLevel",className:"block text-sm font-medium text-gray-700 mb-1",children:"교육기관 구분 *"}),(0,s.jsxs)("select",{id:"educationLevel",value:p,onChange:e=>g(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900 bg-white",children:[(0,s.jsx)("option",{value:"",children:"교육기관을 선택해주세요"}),(0,s.jsx)("option",{value:"초등",children:"초등"}),(0,s.jsx)("option",{value:"중등",children:"중등"}),(0,s.jsx)("option",{value:"고등",children:"고등"}),(0,s.jsx)("option",{value:"대학",children:"대학"}),(0,s.jsx)("option",{value:"민간",children:"민간"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"이메일 *"}),(0,s.jsx)("input",{type:"email",id:"email",value:n,onChange:e=>o(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"이메일을 입력하세요"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호 *"}),(0,s.jsx)("input",{type:"password",id:"password",value:c,onChange:e=>d(e.target.value),required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"비밀번호를 입력하세요 (최소 6자)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호 확인 *"}),(0,s.jsx)("input",{type:"password",id:"confirmPassword",value:x,onChange:e=>m(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"비밀번호를 다시 입력하세요"})]}),(0,s.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-[#66ae7d] text-white py-2 px-4 rounded-md hover:bg-[#497e56] focus:outline-none focus:ring-2 focus:ring-[#66ae7d] disabled:opacity-50",children:b?"가입 중...":"회원가입"})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["이미 계정이 있으신가요?"," ",(0,s.jsx)("button",{onClick:t,className:"text-[#66ae7d] hover:text-[#497e56] font-medium",children:"로그인"})]})})]})}function d(e){let{isOpen:t,onClose:r,onConfirm:n}=e,[a,o]=(0,l.useState)(!1);return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-start justify-center z-50 overflow-y-auto py-8",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 relative shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"G-DEAL 웹사이트(gdeal.io) 가입 안내"}),(0,s.jsx)("button",{onClick:()=>{r(),o(!1)},className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap text-center",children:["안녕하십니까? 저희 경상디지털교육자연합(",(0,s.jsx)("span",{className:"font-semibold text-[#66ae7d]",children:"G-DEAL"}),")의 \n공식 웹사이트에 회원가입을 신청해주셔서 감사합니다."]}),(0,s.jsxs)("p",{className:"text-gray-700 leading-relaxed text-center whitespace-pre-wrap",children:["저희 웹사이트는 ",(0,s.jsx)("span",{className:"font-semibold text-[#66ae7d]",children:"G-DEAL"}),"에 ",(0,s.jsx)("span",{className:"font-semibold",children:"배움회원"}),"으로\n등록되어 있는 교육자만이 가입할 수 있습니다.\n\n그리고 그 배움회원들은 하단의 구글 폼즈 등록 및\n(구글폼즈를 제출하면 카카오톡방 링크가 보입니다)\n카카오톡방 입장을 통해 이루어집니다."]}),(0,s.jsx)("div",{className:"bg-[#66ae7d]/10 p-4 rounded-lg",children:(0,s.jsx)("p",{className:"text-[#66ae7d] font-semibold text-center whitespace-pre-wrap",children:"G-DEAL 배움회원 가입신청을 하시고 난 후 \n본 웹사이트 회원가입을 하시면 가입이 승인됩니다."})}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsxs)("a",{href:"https://forms.gle/rUcknmKXkd1ushGQ9",target:"_blank",rel:"noopener noreferrer",className:"w-full bg-[#66ae7d] text-white py-3 px-4 rounded-lg font-medium hover:bg-[#497e56] transition-colors duration-200 flex items-center justify-center gap-2",children:["G-DEAL 배움회원 가입 신청하기(구글 폼즈)",(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsxs)("label",{className:"flex items-center justify-center space-x-3 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:a,onChange:e=>o(e.target.checked),className:"w-4 h-4 text-[#66ae7d] border-gray-300 rounded focus:ring-[#66ae7d]"}),(0,s.jsx)("span",{className:"text-gray-700",children:"저는 이미 G-DEAL의 배움회원입니다."})]})}),(0,s.jsx)("div",{className:"-mt-1",children:(0,s.jsx)("button",{onClick:()=>{n(),o(!1)},disabled:!a,className:"w-full py-3 px-4 rounded-lg font-medium transition-colors duration-200 ".concat(a?"bg-[#66ae7d] text-white hover:bg-[#497e56]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"gdeal.io 웹사이트 회원가입 계속하기"})})]})]})}):null}function x(e){let{isOpen:t,onClose:r,initialMode:n="login"}=e,[a,i]=(0,l.useState)(n),[x,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&"signup"===n?m(!0):i(n)},[n,t]);let u=()=>{"login"===a?m(!0):i("login")};return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d,{isOpen:x,onClose:()=>{m(!1),r()},onConfirm:()=>{m(!1),i("signup")}}),!x&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-start justify-center z-50 overflow-y-auto py-8",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 my-auto relative shadow-2xl",children:[(0,s.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),"login"===a?(0,s.jsx)(o,{onToggleForm:u,onClose:r}):(0,s.jsx)(c,{onToggleForm:u,onClose:r})]})})]}):null}function m(e){let{isOpen:t,onClose:r}=e,{user:n,userProfile:o,updateUserProfile:i,updateEmailConsent:c,refreshUserProfile:d}=(0,a.A)(),[x,m]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[p,g]=(0,l.useState)(!1),[b,f]=(0,l.useState)(!1),[y,j]=(0,l.useState)(""),[v,w]=(0,l.useState)(""),[N,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{t&&n&&(console.log("\uD83D\uDD04 UserProfileModal 열림 - 프로필 새로고침 시도"),await d())})()},[t,n,d]),(0,l.useEffect)(()=>{if(t&&o&&!N){console.log("\uD83D\uDCCB UserProfileModal 최초 데이터 로드:",{displayName:o.displayName,school:o.school,emailConsent:o.emailConsent,emailConsentType:typeof o.emailConsent}),m(o.displayName||""),h(o.school||"");let e=!0===o.emailConsent;console.log("\uD83D\uDD04 최초 체크박스 상태 설정:",{원본값:o.emailConsent,설정값:e}),g(e),j(""),w(""),k(!0)}else t||k(!1)},[t,o,N]);let C=async e=>{e.preventDefault(),j(""),w(""),f(!0);try{await i({displayName:x.trim(),school:u.trim()});let e=(null==o?void 0:o.emailConsent)===!0;console.log("\uD83D\uDD0D 이메일 동의 상태 비교:",{현재_폼_상태:p,DB_현재_상태:e,DB_원본_값:null==o?void 0:o.emailConsent,변경_필요:p!==e}),p!==e?(console.log("\uD83D\uDCE7 이메일 동의 상태 업데이트 실행:",p),await c(p)):console.log("\uD83D\uDCE7 이메일 동의 상태 변경 없음"),w("개인정보가 성공적으로 업데이트되었습니다."),setTimeout(()=>{r()},1500)}catch(e){console.error("개인정보 업데이트 실패:",e),j("개인정보 업데이트 중 오류가 발생했습니다.")}finally{f(!1)}},F=()=>{b||r()};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>{e.target===e.currentTarget&&F()},children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"개인정보 수정"}),(0,s.jsx)("button",{onClick:F,disabled:b,className:"text-gray-500 hover:text-gray-700 disabled:opacity-50",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[y&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:y})}),v&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:(0,s.jsx)("p",{className:"text-sm text-green-800",children:v})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"이메일"}),(0,s.jsx)("input",{type:"email",id:"email",value:(null==n?void 0:n.email)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"이메일은 변경할 수 없습니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"이름 *"}),(0,s.jsx)("input",{type:"text",id:"displayName",value:x,onChange:e=>m(e.target.value),required:!0,disabled:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900 disabled:opacity-50",placeholder:"이름을 입력하세요"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"school",className:"block text-sm font-medium text-gray-700 mb-1",children:"학교명 *"}),(0,s.jsx)("input",{type:"text",id:"school",value:u,onChange:e=>h(e.target.value),required:!0,disabled:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900 disabled:opacity-50",placeholder:"학교명을 입력하세요"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:p,onChange:e=>{let t=e.target.checked;console.log("\uD83D\uDCCB 체크박스 클릭됨:",{현재_React_상태:p,이벤트에서_받은_새값:t,DOM_체크상태:e.target.checked}),g(t),console.log("✅ React 상태 업데이트 완료:",t)},disabled:b,className:"w-4 h-4 text-[#66ae7d] border-gray-300 rounded focus:ring-[#66ae7d] focus:ring-2 disabled:opacity-50"},"email-consent-".concat(null==o?void 0:o.uid,"-").concat(null==o?void 0:o.emailConsent)),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"마케팅 이메일 수신에 동의합니다 (선택사항)"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(null==o?void 0:o.emailConsent)===!0?"현재: 동의 상태":"현재: 미동의 상태"})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-400 mt-0.5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-blue-800 font-medium",children:"계정 상태"}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:o?"approved"===o.status?"승인됨":"pending"===o.status?"승인 대기 중":"rejected"===o.status?"승인 거부됨":"알 수 없는 상태":"로그인 정보만 있음 (프로필 미생성)"}),(null==o?void 0:o.role)&&(0,s.jsxs)("p",{className:"text-sm text-blue-700",children:["권한: ","admin"===o.role?"운영사무국":"superAdmin"===o.role?"최고 관리자":"일반 사용자"]}),(null==o?void 0:o.memberTier)&&(0,s.jsxs)("p",{className:"text-sm text-blue-700",children:["회원 등급: ",(()=>{let e=o.tierChangedAt?o.tierChangedAt.getFullYear().toString().slice(-2):"";return"operations-office"===o.memberTier?e?"".concat(e,"운영사무국"):"운영사무국":"sharing-member"===o.memberTier?e?"".concat(e,"나눔회원"):"나눔회원":"learning-member"===o.memberTier?"배움회원":"일반회원"})()]})]})]})}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:F,disabled:b,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 disabled:opacity-50",children:"취소"}),(0,s.jsx)("button",{type:"submit",disabled:b,className:"flex-1 bg-[#66ae7d] text-white py-2 px-4 rounded-md hover:bg-[#497e56] focus:outline-none focus:ring-2 focus:ring-[#66ae7d] disabled:opacity-50",children:b?"저장 중...":"저장"})]})]})]})}):null}function u(e){let{content:t,children:r,delay:n=1e3}=e,[a,o]=(0,l.useState)(!1),i=(0,l.useRef)(null);return(0,s.jsxs)("div",{className:"relative inline-block",onMouseEnter:()=>{i.current=setTimeout(()=>{o(!0)},n)},onMouseLeave:()=>{i.current&&clearTimeout(i.current),o(!1)},children:[r,a&&(0,s.jsxs)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-2 py-1 text-sm text-white bg-gray-800 rounded shadow-lg whitespace-nowrap z-50",children:[t,(0,s.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-800"})]})]})}var h=r(5317),p=r(6104);let g={events:{name:"events",type:"대외행사",linkPrefix:"/events",titleField:"title",contentField:"description",dateField:"date"},trainings:{name:"trainings",type:"월별연수",linkPrefix:"/training",titleField:"title",contentField:"description",dateField:"date"},resources:{name:"resources",type:"자료",linkPrefix:"/resources",titleField:"title",contentField:"description",dateField:"createdAt"}},b=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.trim())return[];let{maxResults:r=20,categories:s}=t,l=[];try{for(let t of s?Object.values(g).filter(e=>s.includes(e.type)):Object.values(g))try{let r=(0,h.rJ)(p.db,t.name),s=(0,h.P)(r,(0,h.My)(t.dateField,"desc"),(0,h.AB)(50));(await (0,h.GG)(s)).forEach(r=>{let s=r.data(),n=s[t.titleField]||"",a=s[t.contentField]||"";if(n&&n.trim()&&n.trim().length>0){let d="".concat(n," ").concat(a," ").concat(t.type);"trainings"===t.name&&s.instructor&&(d+=" ".concat(s.instructor)),d=d.toLowerCase();let x=e.toLowerCase();if(d.includes(x)||"월별연수"===x&&"trainings"===t.name||"연수"===x&&"trainings"===t.name){var o,i,c;l.push({id:r.id,title:n.trim(),content:a,type:t.type,link:"".concat(t.linkPrefix,"#").concat(r.id),createdAt:(null==(c=s[t.dateField])||null==(i=c.toDate)||null==(o=i.call(c))?void 0:o.toISOString())||s[t.dateField]||"",imageUrl:s.imageUrl||s.thumbnailUrl||void 0})}}})}catch(e){console.error("Error searching ".concat(t.name,":"),e)}return l.sort((t,r)=>{let s=e.toLowerCase(),l=t.title.toLowerCase().includes(s),n=r.title.toLowerCase().includes(s);return l&&!n?-1:!l&&n?1:new Date(r.createdAt||0).getTime()-new Date(t.createdAt||0).getTime()}),l.slice(0,r)}catch(e){return console.error("Firebase 검색 중 오류:",e),[]}};function f(){var e;console.log("\uD83D\uDE80 SearchHeader 함수 시작 - 타임스탬프:",new Date().toISOString());let[t,r]=(0,l.useState)(!1),[o,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),[h,p]=(0,l.useState)("login"),[g,f]=(0,l.useState)(!1),[y,j]=(0,l.useState)(""),[v,w]=(0,l.useState)([]),[N,k]=(0,l.useState)([]),[C,F]=(0,l.useState)(!1),S=(0,l.useRef)(null),T=(0,l.useRef)(null),L=(0,n.useRouter)(),A=(0,n.usePathname)(),{user:E,userProfile:M,logout:D,loading:P,profileLoading:z}=(0,a.A)();(0,l.useEffect)(()=>{r(!1),i(!1),j(""),w([])},[A]),(0,l.useEffect)(()=>{let e=setTimeout(async()=>{if(!y.trim()){console.log("\uD83D\uDD0D 검색어 없음 - 결과 초기화"),w([]);return}console.log("\uD83D\uDD0D === 검색 시작 ===",{query:y,timestamp:new Date().toISOString()}),F(!0);try{let e=await b(y,{maxResults:10});console.log("\uD83D\uDD0D 검색 완료:",{query:y,resultCount:e.length,results:e.map(e=>({id:e.id,title:e.title,type:e.type}))}),w(e)}catch(e){console.error("❌ 검색 오류:",e),w([])}finally{F(!1)}},300);return()=>clearTimeout(e)},[y]),(0,l.useEffect)(()=>{let e=async()=>{console.log("\uD83D\uDE80 === 검색 기록 확인 시작 ===");try{let e=JSON.parse(localStorage.getItem("searchHistory")||"[]");console.log("\uD83D\uDD0D 저장된 검색 기록:",e);let t=e.filter(e=>e&&e.query&&"string"==typeof e.query&&e.query.trim().length>0).slice(0,5);console.log("\uD83D\uDD0D 유효한 검색 기록:",t);let r=t.map((e,t)=>({id:"search-".concat(t),title:e.query,content:"검색어: ".concat(e.query),type:"검색 기록",link:"#",createdAt:e.timestamp||new Date().toISOString()}));k(r),console.log("\uD83D\uDD0D === 검색 기록 로드 완료 ===",r)}catch(e){console.error("❌ 검색 기록 로드 오류:",e),k([])}};(t||o)&&e()},[t,o]);let O=()=>{try{localStorage.removeItem("searchHistory"),k([]),console.log("\uD83D\uDDD1️ 검색 기록 전체 삭제 완료")}catch(e){console.error("검색 기록 삭제 오류:",e)}},B=async()=>{if(y.trim()){F(!0);try{try{let e=JSON.parse(localStorage.getItem("searchHistory")||"[]"),t={query:y.trim(),timestamp:new Date().toISOString()},r=[t,...e.filter(e=>e.query!==y.trim())].slice(0,10);localStorage.setItem("searchHistory",JSON.stringify(r)),console.log("\uD83D\uDCBE 검색 기록 저장:",t)}catch(e){console.error("검색 기록 저장 오류:",e)}let e=await b(y,{maxResults:15});w(e)}catch(e){console.error("검색 오류:",e),w([])}finally{F(!1)}}};console.log("\uD83D\uDD34 SearchHeader 렌더링 시작!"),console.log("\uD83D\uDD04 SearchHeader - useAuth 결과:",{user:!!E,userProfile:!!M,loading:P,profileLoading:z}),console.log("\uD83D\uDCCA SearchHeader 상태:",{loading:P,profileLoading:z,hasUser:!!E,userUID:null==E?void 0:E.uid,hasUserProfile:!!M,userRole:null==M?void 0:M.role,userEmail:null==M?void 0:M.email,shouldShowAdminButton:M&&("superAdmin"===M.role||"operations-office"===M.memberTier)}),!P&&E&&M?(console.log("✅ SearchHeader: 모든 데이터 로드 완료"),"superAdmin"===M.role||"operations-office"===M.memberTier?(console.log("\uD83D\uDFE2 SearchHeader: 관리자 권한 확인됨 - 버튼 표시해야 함"),window.forceAdminAccess=()=>{console.log("\uD83D\uDE80 강제 관리자 패널 접근 테스트 시작"),console.log("현재 user:",E),console.log("현재 userProfile:",M),L.push("/admin"),console.log("\uD83D\uDE80 router.push('/admin') 실행 완료")},console.log("\uD83D\uDCA1 콘솔에서 forceAdminAccess() 실행하여 테스트 가능")):console.log("\uD83D\uDFE1 SearchHeader: 일반 사용자 - 버튼 숨김")):console.log("⏳ SearchHeader: 로딩 중 또는 데이터 없음");let W=e=>{p(e),d(!0)},I=async()=>{try{await D()}catch(e){console.error("로그아웃 실패:",e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-3 relative z-50",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>r(!t),className:"p-2 text-gray-600 hover:text-black transition-colors relative z-50",title:t?"검색 닫기":"검색",children:t?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"hidden md:block absolute top-0 right-0 w-80 max-h-96 z-40",style:{transform:"translate(0, -8px)"},children:(0,s.jsxs)("div",{className:"bg-gradient-to-br from-[#66ae7d] to-[#5a9a69] rounded-3xl shadow-xl pt-4 pb-3 px-6 flex flex-col h-full relative",children:[(0,s.jsx)("div",{className:"flex items-center mb-4",children:(0,s.jsx)("h2",{className:"text-white text-sm font-bold tracking-wide",children:"SEARCH"})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsxs)("div",{className:"bg-white rounded-full px-4 py-3 flex items-center space-x-2 shadow-lg",children:[(0,s.jsx)("input",{ref:S,type:"text",placeholder:"검색어를 입력해주세요.",value:y,onChange:e=>j(e.target.value),onKeyPress:e=>"Enter"===e.key&&B(),className:"flex-1 outline-none text-gray-800 text-sm placeholder-gray-500",autoFocus:!0}),y.trim()&&(0,s.jsx)("button",{onClick:()=>{j(""),setTimeout(()=>{var e;null==(e=S.current)||e.focus()},50)},className:"text-gray-400 hover:text-gray-600 transition-colors p-1",title:"검색어 삭제",children:(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("button",{onClick:B,disabled:C,className:"text-[#66ae7d] hover:text-[#5a9a69] transition-colors disabled:opacity-50",children:C?(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-[#66ae7d] border-t-transparent rounded-full animate-spin"}):(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:""===y.trim()?(0,s.jsx)("div",{children:(console.log("\uD83C\uDFAF UI 렌더링 시점 recentItems:",N),console.log("\uD83C\uDFAF UI 렌더링 시점 개수:",N.length),N.length>0)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"text-white text-xs opacity-80",style:{color:"#FFFFFF !important",fontSize:"12px"},children:["최근 검색 기록 (",N.length,"개)"]}),(0,s.jsx)("button",{onClick:O,className:"text-white text-xs opacity-60 hover:opacity-100 transition-opacity",style:{color:"#FFFFFF !important",fontSize:"11px",padding:"2px 6px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.2)"},title:"검색 기록 삭제",children:"삭제"})]}),(0,s.jsx)("div",{className:"space-y-1",children:N.map((e,t)=>(console.log("\uD83C\uDFAF 렌더링 항목 ".concat(t,":"),{id:e.id,title:e.title,type:e.type}),(0,s.jsxs)("button",{onClick:()=>{console.log("\uD83C\uDFAF 항목 클릭:",e),"검색 기록"===e.type?(j(e.title),B()):(r(!1),setTimeout(()=>{L.push(e.link)},100))},className:"w-full text-left bg-white bg-opacity-20 backdrop-blur-sm rounded-xl p-3 hover:bg-opacity-30 transition-all duration-200",style:{minHeight:"60px",border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.2)"},children:[(0,s.jsx)("div",{className:"text-white text-sm font-medium truncate",style:{color:"#FFFFFF !important",fontSize:"14px",fontWeight:"500",lineHeight:"1.4"},children:e.title||"[제목 없음]"}),(0,s.jsx)("div",{className:"text-white text-xs opacity-80",style:{color:"#FFFFFF !important",fontSize:"12px",opacity:"0.8",marginTop:"4px"},children:e.type||"[타입 없음]"})]},"".concat(e.id,"-").concat(t))))})]}):(0,s.jsx)("div",{className:"text-center text-white text-sm opacity-80",style:{padding:"20px",color:"#FFFFFF !important"},children:"최근 검색어가 없습니다."})}):(0,s.jsx)("div",{children:v.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-white text-xs mb-2 opacity-80",children:["검색 결과 ",v.length,"개"]}),(0,s.jsx)("div",{className:"space-y-1",children:v.map((e,t)=>{var l;return console.log("\uD83C\uDFAF 검색결과 렌더링 ".concat(t,":"),{id:e.id,title:e.title,type:e.type,content:null==(l=e.content)?void 0:l.substring(0,50),link:e.link}),(0,s.jsx)("button",{onClick:()=>{r(!1),setTimeout(()=>{L.push(e.link)},100)},className:"w-full text-left bg-white bg-opacity-20 backdrop-blur-sm rounded-xl p-3 hover:bg-opacity-30 transition-all duration-200 border border-white border-opacity-30",style:{minHeight:"80px",backgroundColor:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-white text-sm font-medium truncate",style:{color:"#FFFFFF !important",fontSize:"14px",fontWeight:"600",lineHeight:"1.4",marginBottom:"4px"},children:e.title||"[제목 없음]"}),(0,s.jsxs)("div",{className:"text-white text-xs opacity-80 mb-1",style:{color:"#FFFFFF !important",fontSize:"12px",opacity:"0.9",marginBottom:"4px"},children:["[",e.type||"타입 없음","]"]}),e.content&&(0,s.jsxs)("div",{className:"text-white text-xs opacity-70",style:{color:"#FFFFFF !important",fontSize:"11px",opacity:"0.8",lineHeight:"1.3",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:[e.content.substring(0,100),"..."]})]}),(0,s.jsx)("svg",{className:"w-4 h-4 text-white opacity-60 ml-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:"#FFFFFF"},children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e.id)})})]}):C?null:(0,s.jsxs)("div",{className:"text-center text-white text-sm opacity-80",children:['"',y,'"에 대한 검색 결과가 없습니다.']})})})]})})})]}),!P&&(0,s.jsx)(s.Fragment,{children:E?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[M&&("superAdmin"===M.role||"operations-office"===M.memberTier)?(console.log("\uD83C\uDFAF 데스크톱 관리자 패널 버튼이 DOM에 렌더링됨!"),(0,s.jsx)("button",{onClick:()=>{if(console.log("========== 데스크톱 관리자 패널 버튼 클릭 =========="),console.log("현재 user:",E),console.log("현재 userProfile:",M),console.log("현재 loading:",P),!E){console.log("❌ 사용자가 로그인되어 있지 않음"),alert("로그인이 필요합니다.");return}if(!M){console.log("❌ userProfile이 없음, 프로필 로딩 대기"),alert("사용자 프로필을 불러오는 중입니다. 잠시 후 다시 시도해주세요.");return}if("superAdmin"!==M.role&&"operations-office"!==M.memberTier){console.log("❌ 관리자 권한 없음, 현재 역할:",M.role,"등급:",M.memberTier),alert("관리자 권한이 필요합니다.");return}console.log("✅ 모든 조건 통과, /admin으로 이동 시작"),L.push("/admin")},className:"text-sm font-medium transition-colors",style:{color:"#66ae7d"},onMouseEnter:e=>{e.currentTarget.style.color="#497e56"},onMouseLeave:e=>{e.currentTarget.style.color="#66ae7d"},title:"관리자 패널",children:"관리자 패널"})):null,(0,s.jsxs)("button",{onClick:()=>f(!0),className:"text-sm text-gray-600 hover:text-[#66ae7d] transition-colors font-medium",title:"개인정보 수정",children:[(null==M?void 0:M.memberTier)&&(0,s.jsx)("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium mr-2 ".concat("superAdmin"===M.role?"bg-[#66ae7d] text-white":"operations-office"===M.memberTier?"bg-purple-100 text-purple-800":"sharing-member"===M.memberTier?"bg-blue-100 text-blue-800":"learning-member"===M.memberTier?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:(()=>{if("superAdmin"===M.role)return"최고 관리자";let e=M.tierChangedAt?M.tierChangedAt.getFullYear().toString().slice(-2):"";return"operations-office"===M.memberTier?e?"".concat(e,"운영사무국"):"운영사무국":"sharing-member"===M.memberTier?e?"".concat(e,"나눔회원"):"나눔회원":"learning-member"===M.memberTier?"배움회원":"일반회원"})()}),(null==M?void 0:M.displayName)||E.displayName||E.email]}),(0,s.jsx)("button",{onClick:I,className:"p-2 text-gray-600 hover:text-black transition-colors",title:"로그아웃",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{content:"로그인",delay:1e3,children:(0,s.jsx)("button",{onClick:()=>W("login"),className:"p-2 text-gray-600 hover:text-black transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),(0,s.jsx)(u,{content:"회원가입",delay:1e3,children:(0,s.jsx)("button",{onClick:()=>W("signup"),className:"p-2 text-gray-600 hover:text-black transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})})})]})})]}),(0,s.jsxs)("div",{className:"md:hidden flex items-center space-x-2 relative z-50",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>i(!o),className:"p-2 text-gray-600 hover:text-black transition-colors relative z-50",title:o?"검색 닫기":"검색",children:o?(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})}):(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o&&(0,s.jsx)("div",{className:"md:hidden fixed top-0 left-2 right-2 max-h-[70vh] z-40",children:(0,s.jsxs)("div",{className:"bg-gradient-to-br from-[#66ae7d] to-[#5a9a69] rounded-3xl shadow-xl pt-6 pb-6 px-4 flex flex-col h-full relative",children:[(0,s.jsx)("div",{className:"flex items-center mb-4",children:(0,s.jsx)("h2",{className:"text-white text-sm font-bold tracking-wide",children:"SEARCH"})}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-full px-3 py-3 flex items-center space-x-2 shadow-lg",children:[(0,s.jsx)("input",{ref:T,type:"text",placeholder:"검색어를 입력해주세요.",value:y,onChange:e=>j(e.target.value),onKeyPress:e=>"Enter"===e.key&&B(),className:"flex-1 outline-none text-gray-800 text-sm placeholder-gray-500",autoFocus:!0}),y.trim()&&(0,s.jsx)("button",{onClick:()=>{j(""),setTimeout(()=>{var e;null==(e=T.current)||e.focus()},50)},className:"text-gray-400 hover:text-gray-600 transition-colors p-1",title:"검색어 삭제",children:(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("button",{onClick:B,disabled:C,className:"text-[#66ae7d] hover:text-[#5a9a69] transition-colors disabled:opacity-50",children:C?(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-[#66ae7d] border-t-transparent rounded-full animate-spin"}):(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:""===y.trim()?(0,s.jsx)("div",{children:N.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"text-white text-xs opacity-80",style:{color:"#FFFFFF !important",fontSize:"12px"},children:["최근 검색 기록 (",N.length,"개)"]}),(0,s.jsx)("button",{onClick:O,className:"text-white text-xs opacity-60 hover:opacity-100 transition-opacity",style:{color:"#FFFFFF !important",fontSize:"11px",padding:"2px 6px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.2)"},title:"검색 기록 삭제",children:"삭제"})]}),(0,s.jsx)("div",{className:"space-y-1",children:N.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>{if(console.log("\uD83C\uDFAF 모바일 항목 클릭:",e),"검색 기록"===e.type)j(e.title),B();else{i(!1),console.log("\uD83C\uDFAF 모바일 자료 클릭:",e.link);let t=e.link.split("#")[1];t?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;console.log("\uD83C\uDFAF 모바일 네비게이션 시도 ".concat(r+1,":"),e.link),L.push(e.link);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=document.getElementById(t);r?(console.log("\uD83C\uDFAF 모바일 스크롤 성공:",t,"scroll retry:",e),r.scrollIntoView({behavior:"smooth",block:"center"}),r.style.boxShadow="0 0 20px rgba(102, 174, 125, 0.5)",setTimeout(()=>{r.style.boxShadow=""},3e3)):(console.log("\uD83C\uDFAF 모바일 요소 없음:",t,"scroll retry:",e),e<8?setTimeout(()=>s(e+1),1e3):console.log("\uD83C\uDFAF 모바일 스크롤 최종 실패:",t))};setTimeout(()=>s(0),800)}(0):setTimeout(()=>{L.push(e.link)},100)}},className:"w-full text-left bg-white bg-opacity-20 backdrop-blur-sm rounded-xl p-3 hover:bg-opacity-30 transition-all duration-200",style:{minHeight:"60px",border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.2)"},children:[(0,s.jsx)("div",{className:"text-white text-sm font-medium truncate",style:{color:"#FFFFFF !important",fontSize:"14px",fontWeight:"500",lineHeight:"1.4"},children:e.title||"[제목 없음]"}),(0,s.jsx)("div",{className:"text-white text-xs opacity-80",style:{color:"#FFFFFF !important",fontSize:"12px",opacity:"0.8",marginTop:"4px"},children:e.type||"[타입 없음]"})]},"mobile-".concat(e.id,"-").concat(t)))})]}):(0,s.jsx)("div",{className:"text-center text-white text-sm opacity-80 py-8",children:"최근 검색어가 없습니다."})}):(0,s.jsx)("div",{children:C?(0,s.jsx)("div",{className:"text-center text-white text-sm opacity-80 py-8",children:"검색 중..."}):v.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-white text-xs opacity-80 mb-2",style:{color:"#FFFFFF !important",fontSize:"12px"},children:["검색 결과 (",v.length,"개)"]}),(0,s.jsx)("div",{className:"space-y-1",children:v.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>{console.log("\uD83C\uDFAF 모바일 검색 결과 클릭:",e),i(!1),console.log("\uD83C\uDFAF 모바일 검색 결과 클릭:",e.link);let t=e.link.split("#")[1];t?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;console.log("\uD83C\uDFAF 모바일 검색 결과 네비게이션 시도 ".concat(r+1,":"),e.link),L.push(e.link);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=document.getElementById(t);r?(console.log("\uD83C\uDFAF 모바일 검색 결과 스크롤 성공:",t,"scroll retry:",e),r.scrollIntoView({behavior:"smooth",block:"center"}),r.style.boxShadow="0 0 20px rgba(102, 174, 125, 0.5)",setTimeout(()=>{r.style.boxShadow=""},3e3)):(console.log("\uD83C\uDFAF 모바일 검색 결과 요소 없음:",t,"scroll retry:",e),e<8?setTimeout(()=>s(e+1),1e3):console.log("\uD83C\uDFAF 모바일 검색 결과 스크롤 최종 실패:",t))};setTimeout(()=>s(0),800)}(0):setTimeout(()=>{L.push(e.link)},100)},className:"w-full text-left bg-white bg-opacity-20 backdrop-blur-sm rounded-xl p-3 hover:bg-opacity-30 transition-all duration-200",style:{minHeight:"60px",border:"1px solid rgba(255,255,255,0.3)",backgroundColor:"rgba(255,255,255,0.2)"},children:[(0,s.jsx)("div",{className:"text-white text-sm font-medium truncate",style:{color:"#FFFFFF !important",fontSize:"14px",fontWeight:"500",lineHeight:"1.4"},children:e.title}),(0,s.jsx)("div",{className:"text-white text-xs opacity-80",style:{color:"#FFFFFF !important",fontSize:"12px",opacity:"0.8",marginTop:"4px"},children:e.type}),e.content&&(0,s.jsxs)("div",{className:"text-white text-xs opacity-70 mt-1 line-clamp-2",style:{color:"#FFFFFF !important",fontSize:"11px",opacity:"0.7",marginTop:"2px"},children:[e.content.substring(0,60),"..."]})]},"mobile-result-".concat(e.id,"-").concat(t)))})]}):(0,s.jsxs)("div",{className:"text-center text-white text-sm opacity-80 py-8",children:['"',y,'"에 대한 검색 결과가 없습니다.']})})})]})})]}),!P&&(0,s.jsx)(s.Fragment,{children:E?(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[M&&("superAdmin"===M.role||"operations-office"===M.memberTier)?(0,s.jsx)("button",{onClick:()=>{console.log("========== 모바일 관리자 패널 버튼 클릭 =========="),L.push("/admin")},className:"text-xs font-medium transition-colors px-2 py-1 rounded",style:{color:"#66ae7d",backgroundColor:"rgba(102, 174, 125, 0.1)"},title:"관리자 패널",children:"관리자"}):null,(0,s.jsxs)("button",{onClick:()=>f(!0),className:"text-xs text-gray-600 hover:text-[#66ae7d] transition-colors font-medium px-1",title:"개인정보 수정",children:[(null==M?void 0:M.memberTier)&&(0,s.jsx)("span",{className:"inline-block px-1.5 py-0.5 rounded-full text-xs font-medium mr-1 ".concat("superAdmin"===M.role?"bg-[#66ae7d] text-white":"operations-office"===M.memberTier?"bg-purple-100 text-purple-800":"sharing-member"===M.memberTier?"bg-blue-100 text-blue-800":"learning-member"===M.memberTier?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:(()=>{if("superAdmin"===M.role)return"최고 관리자";let e=M.tierChangedAt?M.tierChangedAt.getFullYear().toString().slice(-2):"";return"operations-office"===M.memberTier?e?"".concat(e,"운영"):"운영":"sharing-member"===M.memberTier?e?"".concat(e,"나눔"):"나눔":"learning-member"===M.memberTier?"배움":"일반"})()}),(null==(e=(null==M?void 0:M.displayName)||E.displayName||E.email)?void 0:e.substring(0,5))+"..."]}),(0,s.jsx)("button",{onClick:I,className:"p-1.5 text-gray-600 hover:text-black transition-colors",title:"로그아웃",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>W("login"),className:"p-1.5 text-gray-600 hover:text-black transition-colors",title:"로그인",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,s.jsx)("button",{onClick:()=>W("signup"),className:"p-1.5 text-gray-600 hover:text-black transition-colors",title:"회원가입",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})})]})})]}),(0,s.jsx)(x,{isOpen:c,onClose:()=>d(!1),initialMode:h}),(0,s.jsx)(m,{isOpen:g,onClose:()=>f(!1)})]})}},4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var s=r(2115),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(l),a=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var s,l,n;s=e,l=t,n=r[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(l))in s?Object.defineProperty(s,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[l]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(x,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function x(e){var t=t=>{var r,{attr:l,size:n,title:i}=e,d=function(e,t){if(null==e)return{};var r,s,l=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,a),x=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:x,width:x,xmlns:"http://www.w3.org/2000/svg"}),i&&s.createElement("title",null,i),e.children)};return void 0!==n?s.createElement(n.Consumer,null,e=>t(e)):t(l)}},4803:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(5155),l=r(6874),n=r.n(l),a=r(5695),o=r(2115);let i=e=>{let{size:t="lg",className:r="",style:l={}}=e;return(0,s.jsx)("img",{src:"/G-DEAL_green.svg",alt:"G-DEAL 로고",className:"".concat({sm:"w-24 h-24",md:"w-40 h-40",lg:"w-48 h-48",xl:"w-64 h-64"}[t]," ").concat(r),style:{objectFit:"contain",objectPosition:"center",marginTop:"-16%",marginBottom:"-16%",...l}})};var c=r(4717),d=r(5305),x=r(2515),m=r(6681);function u(){let e=(0,a.usePathname)(),t=(0,a.useRouter)(),[r,l]=(0,o.useState)(!1),{user:u,userProfile:h}=(0,m.A)();u&&h&&"approved"===h.status&&("admin"===h.role||"superAdmin"===h.role||h.role),(0,o.useEffect)(()=>{let t=()=>{document.querySelectorAll("[data-sidebar-link]").forEach(t=>{var r;let s=e.replace(/\/$/,"")||"/";s===((null==(r=t.getAttribute("href"))?void 0:r.replace(/\/$/,""))||"/")?(t.style.backgroundColor="#66ae7d",t.style.color="white",t.style.backdropFilter="none",t.style.border="none",t.style.boxShadow="none",t.style.transform="translateY(0)"):(t.style.backgroundColor="transparent",t.style.backdropFilter="none",t.style.border="none",t.style.boxShadow="none",t.style.transform="translateY(0)",t.style.color="#374151")})};t();let r=setTimeout(t,100);return()=>clearTimeout(r)},[e]);let p=[{href:"/home",label:"홈",icon:c.rTq},{href:"/about",label:"소개",icon:d.u7w},{href:"/events",label:"대외행사",icon:x.GUB},{href:"/training",label:"월별연수",icon:c.dHv},{href:"/resources",label:"자료공유",icon:c.W5h}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"fixed top-4 left-4 md:hidden bg-white rounded-lg p-2 shadow-lg border border-gray-200 w-11 h-11 flex items-center justify-center ".concat(r?"z-[70]":"z-[30]"),onClick:()=>l(!r),children:(0,s.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-55 md:hidden",onClick:()=>l(!1)}),(0,s.jsx)("div",{className:"desktop-sidebar-container hidden md:block w-60 min-h-screen bg-white relative z-30",children:(0,s.jsxs)("div",{className:"p-2 h-full bg-white flex flex-col desktop-sidebar-content",children:[(0,s.jsx)(n(),{href:"/home",className:"flex items-center justify-center mb-2",children:(0,s.jsx)(i,{size:"md"})}),(0,s.jsx)("nav",{className:"space-y-2 desktop-nav",children:p.map(t=>{let r=(e.replace(/\/$/,"")||"/")===(t.href.replace(/\/$/,"")||"/"),l=t.icon;return(0,s.jsxs)(n(),{href:t.href,"data-sidebar-link":!0,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"0.5rem",fontWeight:"500",textDecoration:"none",transition:"all 0.2s ease-in-out",backgroundColor:r?"#66ae7d":"transparent",color:r?"white":"#374151",border:"none",outline:"none"},onMouseEnter:e=>{if(!r){e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)",e.currentTarget.style.backdropFilter="blur(20px)",e.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.2)",e.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.1)",e.currentTarget.style.color="#1f2937",e.currentTarget.style.transform="translateY(-1px)";let t=e.currentTarget.querySelector("svg");t&&(t.style.color="#1f2937")}},onMouseLeave:e=>{let r=window.location.pathname.replace(/\/$/,"")||"/";if(r!==(t.href.replace(/\/$/,"")||"/")){e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.backdropFilter="none",e.currentTarget.style.border="none",e.currentTarget.style.boxShadow="none",e.currentTarget.style.color="#374151",e.currentTarget.style.transform="translateY(0)";let t=e.currentTarget.querySelector("svg");t&&(t.style.color="#66ae7d")}},children:[(0,s.jsx)(l,{style:{fontSize:"1.125rem",flexShrink:0,color:r?"white":"#66ae7d"}}),(0,s.jsx)("span",{style:{fontSize:"1rem",fontWeight:"500"},children:t.label})]},"desktop-".concat(t.href))})}),(0,s.jsx)("div",{className:"mt-6 desktop-circular-links-container",children:(0,s.jsxs)("div",{className:"flex justify-center space-x-4 desktop-circular-links-wrapper",children:[(0,s.jsxs)("div",{className:"desktop-circular-diary-btn",onClick:()=>{t.push("/diary")},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"#66ae7d",cursor:"pointer",userSelect:"none",textDecoration:"none",border:"none",outline:"none",transform:"translateY(0)",filter:"brightness(1)",boxShadow:"0 8px 20px rgba(102, 174, 125, 0.4), 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#497e56",e.currentTarget.style.boxShadow="0 12px 30px rgba(102, 174, 125, 0.5), 0 6px 18px rgba(0, 0, 0, 0.2), 0 3px 9px rgba(0, 0, 0, 0.15)",e.currentTarget.style.transform="translateY(-3px) scale(1.05)",e.currentTarget.style.filter="brightness(1.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#66ae7d",e.currentTarget.style.boxShadow="0 8px 20px rgba(102, 174, 125, 0.4), 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1)",e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.filter="brightness(1)"},children:[(0,s.jsx)(x.yey,{className:"text-white text-lg mb-1"}),(0,s.jsx)("span",{className:"text-white text-xs font-bold tracking-wide",children:"교단일기"})]}),(0,s.jsxs)("div",{className:"desktop-circular-member-btn",onClick:()=>{window.open("https://sites.google.com/gdeal.io/gdeal-directory/홈","_blank")},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"#66ae7d",cursor:"pointer",userSelect:"none",textDecoration:"none",border:"none",outline:"none",transform:"translateY(0)",filter:"brightness(1)",boxShadow:"0 8px 20px rgba(102, 174, 125, 0.4), 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#497e56",e.currentTarget.style.boxShadow="0 12px 30px rgba(102, 174, 125, 0.5), 0 6px 18px rgba(0, 0, 0, 0.2), 0 3px 9px rgba(0, 0, 0, 0.15)",e.currentTarget.style.transform="translateY(-3px) scale(1.05)",e.currentTarget.style.filter="brightness(1.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#66ae7d",e.currentTarget.style.boxShadow="0 8px 20px rgba(102, 174, 125, 0.4), 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1)",e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.filter="brightness(1)"},children:[(0,s.jsx)(c.ccC,{className:"text-white text-lg mb-1"}),(0,s.jsx)("span",{className:"text-white text-xs font-bold tracking-wide",children:"회원명부"})]})]})}),(0,s.jsx)("div",{className:"flex-1 bg-white"})]})}),(0,s.jsx)("div",{className:"\n        mobile-sidebar-container md:hidden fixed top-0 left-0 h-screen bg-white z-60 transform transition-transform duration-300\n        ".concat(r?"translate-x-0":"-translate-x-full","\n        w-64\n      "),children:(0,s.jsx)("div",{className:"h-full bg-white flex flex-col mobile-sidebar-content",children:(0,s.jsxs)("div",{className:"pt-16 px-2 pb-2 h-full flex flex-col",children:[(0,s.jsx)(n(),{href:"/home",className:"flex items-center justify-center mb-4",onClick:()=>l(!1),children:(0,s.jsx)(i,{size:"md"})}),(0,s.jsx)("nav",{className:"space-y-2 mobile-nav",children:p.map(t=>{let r=(e.replace(/\/$/,"")||"/")===(t.href.replace(/\/$/,"")||"/"),a=t.icon;return(0,s.jsxs)(n(),{href:t.href,"data-sidebar-link":!0,onClick:()=>l(!1),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"0.5rem",fontWeight:"500",textDecoration:"none",transition:"all 0.2s ease-in-out",backgroundColor:r?"#66ae7d":"transparent",color:r?"white":"#374151",border:"none",outline:"none"},onMouseEnter:e=>{if(!r){e.currentTarget.style.backgroundColor="rgba(102, 174, 125, 0.1)",e.currentTarget.style.color="#66ae7d";let t=e.currentTarget.querySelector("svg");t&&(t.style.color="#66ae7d")}},onMouseLeave:e=>{let r=window.location.pathname.replace(/\/$/,"")||"/";if(r!==(t.href.replace(/\/$/,"")||"/")){e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="#374151";let t=e.currentTarget.querySelector("svg");t&&(t.style.color="#66ae7d")}},children:[(0,s.jsx)(a,{style:{fontSize:"1.125rem",flexShrink:0,color:r?"white":"#66ae7d"}}),(0,s.jsx)("span",{style:{fontSize:"1rem",fontWeight:"500"},children:t.label})]},"mobile-".concat(t.href))})}),(0,s.jsx)("div",{className:"mt-6 mobile-circular-links-container",children:(0,s.jsxs)("div",{className:"flex justify-center space-x-4 mobile-circular-links-wrapper",children:[(0,s.jsxs)("div",{className:"mobile-circular-diary-btn",onClick:()=>{t.push("/diary"),l(!1)},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"#66ae7d",cursor:"pointer",userSelect:"none",textDecoration:"none",border:"none",outline:"none",transform:"translateY(0)",filter:"brightness(1)",boxShadow:"0 8px 20px rgba(102, 174, 125, 0.4), 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#497e56",e.currentTarget.style.boxShadow="0 12px 30px rgba(102, 174, 125, 0.5), 0 6px 18px rgba(0, 0, 0, 0.2), 0 3px 9px rgba(0, 0, 0, 0.15)",e.currentTarget.style.transform="translateY(-3px) scale(1.05)",e.currentTarget.style.filter="brightness(1.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#66ae7d",e.currentTarget.style.boxShadow="0 8px 20px rgba(102, 174, 125, 0.4), 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1)",e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.filter="brightness(1)"},children:[(0,s.jsx)(x.yey,{className:"text-white text-lg mb-1"}),(0,s.jsx)("span",{className:"text-white text-xs font-bold tracking-wide",children:"교단일기"})]}),(0,s.jsxs)("div",{className:"mobile-circular-member-btn",onClick:()=>{window.open("https://sites.google.com/gdeal.io/gdeal-directory/홈","_blank")},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"#66ae7d",cursor:"pointer",userSelect:"none",textDecoration:"none",border:"none",outline:"none",transform:"translateY(0)",filter:"brightness(1)",boxShadow:"0 8px 20px rgba(102, 174, 125, 0.4), 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#497e56",e.currentTarget.style.boxShadow="0 12px 30px rgba(102, 174, 125, 0.5), 0 6px 18px rgba(0, 0, 0, 0.2), 0 3px 9px rgba(0, 0, 0, 0.15)",e.currentTarget.style.transform="translateY(-3px) scale(1.05)",e.currentTarget.style.filter="brightness(1.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#66ae7d",e.currentTarget.style.boxShadow="0 8px 20px rgba(102, 174, 125, 0.4), 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1)",e.currentTarget.style.transform="translateY(0) scale(1)",e.currentTarget.style.filter="brightness(1)"},children:[(0,s.jsx)(c.ccC,{className:"text-white text-lg mb-1"}),(0,s.jsx)("span",{className:"text-white text-xs font-bold tracking-wide",children:"회원명부"})]})]})}),(0,s.jsx)("div",{className:"flex-1 bg-white"})]})})})]})}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6179:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(5155),l=r(6681);function n(){let{user:e,userProfile:t}=(0,l.A)();return e&&(null==t?void 0:t.status)!=="approved"?(null==t?void 0:t.status)==="pending"?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"⏳"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"승인 대기 중"}),(0,s.jsxs)("div",{className:"text-gray-600 space-y-2 mb-6",children:[(0,s.jsx)("p",{children:"회원가입이 완료되었습니다."}),(0,s.jsx)("p",{children:"관리자 승인을 기다리는 중입니다."}),(0,s.jsx)("p",{className:"text-sm text-blue-600",children:"승인 후 이메일 알림을 받으실 수 있습니다."})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"회원정보"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"이름:"})," ",t.displayName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"이메일:"})," ",t.email]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"학교:"})," ",t.school]})]})]}),(0,s.jsx)("button",{onClick:()=>window.location.href="/",className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:"확인"})]})}):(null==t?void 0:t.status)==="rejected"?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"❌"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"승인 거부"}),(0,s.jsxs)("div",{className:"text-gray-600 space-y-2 mb-6",children:[(0,s.jsx)("p",{children:"죄송합니다. 회원가입이 승인되지 않았습니다."}),(0,s.jsx)("p",{className:"text-sm",children:"문의사항이 있으시면 관리자에게 연락해주세요."})]}),(0,s.jsx)("button",{onClick:()=>window.location.href="/",className:"bg-gray-600 text-white px-6 py-3 rounded-md hover:bg-gray-700 transition-colors",children:"확인"})]})}):null:null}},6681:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(283);let l=()=>{let e=(0,s.A)();if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},6916:(e,t,r)=>{Promise.resolve().then(r.bind(r,6179)),Promise.resolve().then(r.bind(r,2639)),Promise.resolve().then(r.bind(r,2942)),Promise.resolve().then(r.bind(r,4803))}},e=>{e.O(0,[135,965,479,87,777,711,670,874,86,441,964,358],()=>e(e.s=6916)),_N_E=e.O()}]);