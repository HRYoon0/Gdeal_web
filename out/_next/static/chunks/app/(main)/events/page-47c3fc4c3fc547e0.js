(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{5278:(e,t,s)=>{Promise.resolve().then(s.bind(s,9700))},9700:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var l=s(5155),a=s(2115),r=s(6681),i=s(9086),n=s(3068);function d(e){let{onImagesSelected:t,maxImages:s=10,folderId:r="1Ddx2IRs4IvTl1GSZxf7kQjEVlKlgkOuz"}=e,[i,n]=(0,a.useState)(!1),[d,c]=(0,a.useState)(""),o=e=>{console.log("변환 전 URL:",e);let t=null;for(let s of[/https:\/\/drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/,/https:\/\/drive\.google\.com\/open\?id=([a-zA-Z0-9_-]+)/,/https:\/\/drive\.google\.com\/uc\?id=([a-zA-Z0-9_-]+)/]){let l=e.match(s);if(l&&l[1]){t=l[1];break}}if(t){let e="https://drive.google.com/thumbnail?id=".concat(t,"&sz=w1000");return console.log("변환 후 URL:",e),e}return e},m=(0,a.useCallback)(()=>{if(!d.trim())return;let e=d.split("\n").map(e=>e.trim()).filter(e=>e.length>0),l=[],a=[];e.forEach(e=>{try{new URL(e),e.includes("drive.google.com")?l.push(o(e)):e.match(/\.(jpg|jpeg|png|gif|webp)$/i)&&a.push(e)}catch(e){}});let r=[...l,...a];return 0===r.length?void alert("유효한 이미지 URL이 없습니다."):r.length>s?void alert("최대 ".concat(s,"개의 이미지만 선택할 수 있습니다.")):void(t(r),c(""))},[d,s,t]),x=(0,a.useCallback)(async()=>{try{n(!0);let e=await navigator.clipboard.readText();if(e.includes("drive.google.com")){if(c(e),window.confirm("클립보드에서 구글 드라이브 링크가 감지되었습니다. 자동으로 추가하시겠습니까?")){let s=e.split("\n").map(e=>e.trim()).filter(e=>e.includes("drive.google.com")).map(e=>o(e));s.length>0&&t(s)}}else alert("클립보드에 구글 드라이브 링크가 없습니다.")}catch(e){console.error("클립보드 읽기 실패:",e),alert("클립보드 읽기에 실패했습니다. 수동으로 붙여넣어 주세요.")}finally{n(!1)}},[t]);return(0,l.jsxs)("div",{className:"space-y-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:"\uD83D\uDE80 개선된 이미지 추가"}),(0,l.jsxs)("span",{className:"text-xs text-gray-500",children:["최대 ",s,"개"]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsxs)("button",{type:"button",onClick:x,disabled:i,className:"flex items-center justify-center space-x-2 px-6 py-3 bg-[#66ae7d] text-white rounded-md hover:bg-[#497e56] disabled:opacity-50 transition-colors text-sm font-medium",children:[(0,l.jsx)("span",{children:"\uD83D\uDCCB"}),(0,l.jsx)("span",{children:i?"감지 중...":"클립보드 자동감지"})]})}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uD83D\uDCA1 여러 링크 한번에 추가 (줄바꿈으로 구분)"}),(0,l.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),placeholder:"구글 드라이브 링크들을 여기에 붙여넣으세요 (여러 개 링크는 줄바꿈으로 구분)  예시: https://drive.google.com/file/d/1abc.../view https://drive.google.com/file/d/2def.../view",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-sm resize-none"}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("span",{className:"text-xs text-gray-500",children:[d.split("\n").filter(e=>e.trim().includes("drive.google.com")).length,"개 감지됨"]}),(0,l.jsx)("button",{type:"button",onClick:m,disabled:!d.trim(),className:"px-4 py-2 bg-[#66ae7d] text-white rounded-md hover:bg-[#497e56] disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:"\uD83D\uDE80 한번에 추가"})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 text-xs",children:[(0,l.jsx)("p",{className:"font-medium text-blue-800 mb-1",children:"\uD83D\uDCA1 사용법"}),(0,l.jsxs)("div",{className:"text-blue-700 space-y-1",children:[(0,l.jsxs)("p",{children:["• ",(0,l.jsx)("strong",{children:"클립보드 자동감지"}),": 구글 드라이브에서 이미지 링크 복사 후 버튼 클릭"]}),(0,l.jsxs)("p",{children:["• ",(0,l.jsx)("strong",{children:"여러 링크 추가"}),': 아래 텍스트박스에 링크들을 붙여넣기 후 "한번에 추가" 클릭']}),(0,l.jsxs)("p",{children:["• ",(0,l.jsx)("strong",{children:"팁"}),': 구글 드라이브에서 여러 이미지 선택 → 우클릭 → "링크 가져오기"']})]})]})]})}function c(e){let{onImagesSelected:t,maxImages:s=10,currentImageUrls:r=[]}=e,[i,c]=(0,a.useState)("drive-picker");return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\uD83D\uDCF8 이미지 추가 방법 선택"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6",children:[{id:"drive-picker",name:"\uD83D\uDCC1 G-DEAL 폴더 이미지"},{id:"manual-links",name:"\uD83D\uDD17 링크 입력"}].map(e=>(0,l.jsxs)("button",{type:"button",onClick:()=>c(e.id),className:"\n                relative p-4 text-center rounded-lg border-2 transition-all\n                ".concat(i===e.id?"border-[#66ae7d] bg-green-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300 hover:bg-gray-50","\n              "),children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),i===e.id&&(0,l.jsx)("div",{className:"absolute top-2 right-2",children:(0,l.jsx)("div",{className:"w-4 h-4 bg-[#66ae7d] rounded-full flex items-center justify-center",children:(0,l.jsx)("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 8 8",children:(0,l.jsx)("path",{d:"M6.564.75l-3.59 3.612-1.538-1.55L0 4.26 2.974 7.25 8 2.193z"})})})})]},e.id))})]}),(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 bg-white",children:["drive-picker"===i&&(0,l.jsx)(n.A,{onImagesSelected:t,maxImages:s,currentImageUrls:r}),"manual-links"===i&&(0,l.jsx)(d,{onImagesSelected:t,maxImages:s})]})]})}var o=s(351);let m=[{id:"1",title:"2024 경남 디지털 교육 컨퍼런스",description:"경남권 교사들이 모여 디지털 교육의 현재와 미래를 논의한 뜻깊은 시간이었습니다.",date:"2024-07-20",location:"창원컨벤션센터",images:["/placeholder-event1-1.jpg","/placeholder-event1-2.jpg","/placeholder-event1-3.jpg","/placeholder-event1-4.jpg"],tags:["컨퍼런스","디지털교육","네트워킹"]},{id:"2",title:"AI 교육 혁신 워크숍",description:"인공지능을 활용한 개인맞춤형 학습과 수업 혁신 방안을 모색했습니다.",date:"2024-06-15",location:"부산교육청",images:["/placeholder-event2-1.jpg","/placeholder-event2-2.jpg","/placeholder-event2-3.jpg"],tags:["AI","워크숍","혁신"]},{id:"3",title:"메타버스 교실 체험전",description:"가상현실 기술을 활용한 새로운 교육 환경을 직접 체험해보는 행사였습니다.",date:"2024-05-25",location:"진주교육지원청",images:["/placeholder-event3-1.jpg","/placeholder-event3-2.jpg","/placeholder-event3-3.jpg","/placeholder-event3-4.jpg","/placeholder-event3-5.jpg"],tags:["메타버스","VR","체험"]},{id:"4",title:"디지털 평가 혁신 포럼",description:"디지털 도구를 활용한 새로운 평가 방법과 피드백 시스템을 소개했습니다.",date:"2024-04-18",location:"경남교육청",images:["/placeholder-event4-1.jpg","/placeholder-event4-2.jpg"],tags:["평가","포럼","혁신"]}];function x(){var e;let{userProfile:t}=(0,r.A)(),[s,n]=(0,a.useState)([]),[d,x]=(0,a.useState)(!0),[g,u]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[b,f]=(0,a.useState)(!1),[j,y]=(0,a.useState)(!1),[v,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(null),[C,D]=(0,a.useState)([]),[S,I]=(0,a.useState)(""),[E,L]=(0,a.useState)(null),[z,A]=(0,a.useState)(null),[T,q]=(0,a.useState)(0),[B,_]=(0,a.useState)([]),R=t&&("superAdmin"===t.role||"operations-office"===t.memberTier);(0,a.useEffect)(()=>{let e=e=>{if(z)switch(e.key){case"Escape":G();break;case"ArrowLeft":Z("prev");break;case"ArrowRight":Z("next")}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[z,T,B]),(0,a.useEffect)(()=>{(async()=>{try{x(!0);let e=await (0,i.kQ)();n(e)}catch(e){console.error("이벤트 로드 실패:",e),n(m)}finally{x(!1)}})()},[]),(0,a.useEffect)(()=>{if(!d&&s.length>0){let e=window.location.hash.substring(1);e&&setTimeout(()=>{let t=document.getElementById(e);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.style.boxShadow="0 0 20px rgba(102, 174, 125, 0.5)",setTimeout(()=>{t.style.boxShadow=""},3e3))},100)}},[d,s]);let V=s.filter(e=>{let t=g.toLowerCase(),s=e.title.toLowerCase().includes(t)||e.location.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t)),l=""===h||e.date.includes(h);return s&&l}),U=async()=>{if(null==w?void 0:w.id){try{await (0,i.SX)(w.id),n(e=>e.filter(e=>e.id!==w.id)),alert("행사가 성공적으로 삭제되었습니다.")}catch(e){console.error("행사 삭제 실패:",e),alert("행사 삭제에 실패했습니다.")}N(!1),k(null)}},F=()=>{k(null),D([]),I("")},O=e=>{D(t=>t.filter((t,s)=>s!==e))},P=e=>{L(E!==e?e:null),setTimeout(()=>{let t=document.getElementById(e);if(t){let e=t.getBoundingClientRect(),s=window.pageYOffset+e.top-100;window.scrollTo({top:s,behavior:"smooth"})}},100)},G=()=>{A(null),_([]),q(0)},Z=e=>{if(0===B.length)return;let t=T;q(t="next"===e?(T+1)%B.length:(T-1+B.length)%B.length),A(B[t])};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-[#66ae7d] to-[#497e56] text-white py-16 relative",children:[(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"대외행사"}),(0,l.jsx)("p",{className:"text-xl opacity-90",children:"G-DEAL이 참여한 다양한 교육 행사와 활동 모습들"})]})}),R&&(0,l.jsxs)("button",{onClick:()=>{F(),f(!0)},className:"absolute bottom-4 right-4 bg-white text-[#66ae7d] px-6 py-3 rounded-lg font-medium hover:bg-gray-100 transition-colors flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-lg",children:"+"}),(0,l.jsx)("span",{children:"행사 등록"})]})]}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-8",children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)("input",{type:"text",placeholder:"제목, 장소, 태그로 검색...",value:g,onChange:e=>u(e.target.value),className:"w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900"})}),(0,l.jsx)("div",{className:"lg:w-48",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("label",{htmlFor:"dateFilter",className:"block text-sm font-medium text-gray-700 mb-1 sm:hidden",children:"날짜 검색"}),(0,l.jsx)("input",{id:"dateFilter",type:"date",placeholder:"날짜로 검색",value:h,onChange:e=>p(e.target.value),className:"w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900  [&::-webkit-datetime-edit]:text-gray-900  [&::-webkit-datetime-edit-text]:text-gray-700 [&::-webkit-datetime-edit-month-field]:text-gray-900 [&::-webkit-datetime-edit-day-field]:text-gray-900 [&::-webkit-datetime-edit-year-field]:text-gray-900 [&::-webkit-calendar-picker-indicator]:text-gray-700 text-base sm:text-sm"})]})})]})}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("p",{className:"text-gray-600",children:["총 ",(0,l.jsx)("span",{className:"font-semibold text-[#66ae7d]",children:V.length}),"개의 행사"]})}),d?(0,l.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#66ae7d]"}),(0,l.jsx)("span",{className:"ml-3 text-gray-600",children:"행사를 불러오는 중..."})]}):0===s.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("p",{className:"text-gray-600 text-lg",children:"등록된 행사가 없습니다."}),R&&(0,l.jsx)("p",{className:"text-gray-500 mt-2",children:"첫 번째 행사를 등록해보세요!"})]}):0===V.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:"검색 조건에 맞는 행사가 없습니다."}),(0,l.jsx)("button",{onClick:()=>{u(""),p("")},className:"text-[#66ae7d] hover:underline",children:"검색 조건 초기화"})]}):(0,l.jsx)("div",{className:"grid gap-8",children:V.map(e=>(0,l.jsxs)("div",{id:e.id,className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)("div",{className:"flex gap-4",children:[e.images&&e.images.length>0&&(0,l.jsxs)("div",{className:"flex-shrink-0",children:[(0,l.jsx)("div",{className:"w-32 h-32 bg-gray-100 rounded-lg overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>P(e.id||""),children:(0,l.jsx)("img",{src:e.images[0],alt:"".concat(e.title," 대표 이미지"),className:"w-full h-full object-cover",onError:e=>{e.target.src="/placeholder-image.jpg"}})}),e.images.length>1&&(0,l.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-1",children:["+",e.images.length-1,"개 더"]})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 cursor-pointer hover:text-[#66ae7d] transition-colors flex-1",onClick:()=>P(e.id||""),children:e.title}),R&&(0,l.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,l.jsx)("button",{onClick:()=>{k(e),e.images&&e.images.length>0?D(e.images):D([]),I(""),y(!0)},className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors",title:"수정",children:(0,l.jsx)(o.SG1,{className:"text-lg"})}),(0,l.jsx)("button",{onClick:()=>{k(e),N(!0)},className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-full transition-colors",title:"삭제",children:(0,l.jsx)(o.IXo,{className:"text-lg"})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 text-sm text-gray-600 mb-3",children:[(0,l.jsxs)("span",{children:["\uD83D\uDCC5 ",e.date]}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,l.jsxs)("span",{children:["\uD83D\uDCCD ",e.location]})]})]}),(0,l.jsx)("p",{className:"text-gray-700 mb-4",style:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"pre-wrap"},children:e.description}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags.map((e,t)=>(0,l.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:["#",e]},t))})]})]})}),E===e.id&&e.images&&e.images.length>0&&(0,l.jsxs)("div",{className:"border-t bg-gray-50 p-4",children:[(0,l.jsxs)("div",{className:"mb-6 bg-white rounded-lg p-4 border",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"행사 상세 설명"}),(0,l.jsx)("p",{className:"text-gray-700 leading-relaxed",style:{whiteSpace:"pre-wrap"},children:e.description})]}),(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsxs)("h4",{className:"text-base font-medium text-gray-700",children:["전체 행사 사진 (",e.images.length,"장)"]})}),(0,l.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:e.images.map((t,s)=>(console.log('행사 "'.concat(e.title,'" 이미지 ').concat(s+1,":"),t),(0,l.jsxs)("div",{className:"relative aspect-square bg-gray-100 rounded-lg overflow-hidden group cursor-pointer hover:shadow-lg transition-all duration-200",children:[t?(0,l.jsx)("img",{src:t,alt:"".concat(e.title," 사진 ").concat(s+1),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onClick:()=>{var t;return t=e.images||[],void(_(t),q(s),A(t[s]))},onLoad:()=>console.log("이미지 로드 성공: ".concat(t)),onError:e=>{console.error("이미지 로드 실패: ".concat(t),e),e.target.src="/placeholder-image.jpg"}}):(0,l.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-[#66ae7d] to-[#497e56] flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white text-base opacity-80",children:"\uD83D\uDCF8"})}),(0,l.jsx)("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:s+1}),R&&(0,l.jsx)("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,l.jsx)("div",{className:"flex space-x-1",children:(0,l.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white p-0.5 rounded text-xs",title:"사진 삭제",onClick:e=>{e.stopPropagation()},children:"\xd7"})})})]},s)))})]})]},e.id))})]}),b&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&(f(!1),F())},children:(0,l.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"새 행사 등록"}),(0,l.jsx)("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700",children:(0,l.jsx)("span",{className:"text-2xl",children:"\xd7"})})]}),(0,l.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{e.preventDefault();let s=e.currentTarget,l=s.elements.namedItem("title").value,a=s.elements.namedItem("description").value,r=s.elements.namedItem("date").value,d=s.elements.namedItem("location").value,c=s.elements.namedItem("tags").value.split(",").map(e=>e.trim()).filter(e=>e.length>0);try{let e={title:l,description:a,date:r,location:d,images:C,tags:c,createdBy:null==t?void 0:t.uid},s={id:await (0,i.lh)(e),...e};n(e=>[s,...e]),alert("행사가 성공적으로 등록되었습니다!"),f(!1),F()}catch(e){console.error("행사 등록 실패:",e),alert("행사 등록에 실패했습니다.")}},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"행사 제목 *"}),(0,l.jsx)("input",{type:"text",name:"title",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"행사 제목을 입력하세요"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"행사 설명 *"}),(0,l.jsx)("textarea",{rows:4,name:"description",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"행사에 대한 상세 설명을 입력하세요"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"행사 날짜 *"}),(0,l.jsx)("input",{type:"date",name:"date",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"행사 장소 *"}),(0,l.jsx)("input",{type:"text",name:"location",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"행사 장소를 입력하세요"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"태그 (쉼표로 구분)"}),(0,l.jsx)("input",{type:"text",name:"tags",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"컨퍼런스, 디지털교육, 네트워킹"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(c,{onImagesSelected:e=>{let t=C.length;if(t+e.length>10)return void alert("최대 ".concat(10,"개의 이미지만 추가할 수 있습니다. (현재: ").concat(t,"개)"));let s=e.filter(e=>!C.includes(e));s.length!==e.length&&alert("".concat(e.length-s.length,"개의 중복 이미지가 제외되었습니다.")),D(e=>[...e,...s])},maxImages:10,currentImageUrls:C}),C.length>0&&(0,l.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,l.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["선택된 이미지 (",C.length,"개)"]}),C.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-md",children:[(0,l.jsx)("img",{src:e,alt:"이미지 ".concat(t+1),className:"w-12 h-12 object-cover rounded",onError:e=>{e.target.src="/placeholder-image.jpg"}}),(0,l.jsx)("span",{className:"flex-1 text-sm text-gray-600 truncate",children:e}),(0,l.jsx)("button",{type:"button",onClick:()=>O(t),className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"제거"})]},t))]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-6",children:[(0,l.jsx)("button",{type:"button",onClick:()=>{f(!1),F()},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"취소"}),(0,l.jsx)("button",{type:"submit",className:"px-6 py-2 bg-[#66ae7d] text-white rounded-md hover:bg-[#497e56] transition-colors",children:"등록하기"})]})]})]})})}),j&&w&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&(y(!1),k(null),F())},children:(0,l.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"행사 수정"}),(0,l.jsx)("button",{onClick:()=>{y(!1),k(null)},className:"text-gray-500 hover:text-gray-700",children:(0,l.jsx)("span",{className:"text-2xl",children:"\xd7"})})]}),(0,l.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{if(e.preventDefault(),!(null==w?void 0:w.id))return;let s=e.currentTarget,l=s.elements.namedItem("title").value,a=s.elements.namedItem("description").value,r=s.elements.namedItem("date").value,d=s.elements.namedItem("location").value,c=s.elements.namedItem("tags").value.split(",").map(e=>e.trim()).filter(e=>e.length>0);try{let e={title:l,description:a,date:r,location:d,images:C,tags:c,updatedBy:null==t?void 0:t.uid};await (0,i.qM)(w.id,e),n(t=>t.map(t=>t.id===w.id?{...t,...e}:t)),alert("행사가 성공적으로 수정되었습니다!"),y(!1),k(null),F()}catch(e){console.error("행사 수정 실패:",e),alert("행사 수정에 실패했습니다.")}},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"행사 제목 *"}),(0,l.jsx)("input",{type:"text",name:"title",required:!0,defaultValue:w.title,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"행사 제목을 입력하세요"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"행사 설명 *"}),(0,l.jsx)("textarea",{rows:4,name:"description",required:!0,defaultValue:w.description,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"행사에 대한 상세 설명을 입력하세요"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"행사 날짜 *"}),(0,l.jsx)("input",{type:"date",name:"date",required:!0,defaultValue:w.date,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"행사 장소 *"}),(0,l.jsx)("input",{type:"text",name:"location",required:!0,defaultValue:w.location,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"행사 장소를 입력하세요"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"태그 (쉼표로 구분)"}),(0,l.jsx)("input",{type:"text",name:"tags",defaultValue:null==(e=w.tags)?void 0:e.join(", "),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#66ae7d] text-gray-900",placeholder:"컨퍼런스, 디지털교육, 네트워킹"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(c,{onImagesSelected:e=>{let t=C.length;if(t+e.length>10)return void alert("최대 ".concat(10,"개의 이미지만 추가할 수 있습니다. (현재: ").concat(t,"개)"));let s=e.filter(e=>!C.includes(e));s.length!==e.length&&alert("".concat(e.length-s.length,"개의 중복 이미지가 제외되었습니다.")),D(e=>[...e,...s])},maxImages:10,currentImageUrls:C}),C.length>0&&(0,l.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,l.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["선택된 이미지 (",C.length,"개)"]}),C.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-md",children:[(0,l.jsx)("img",{src:e,alt:"이미지 ".concat(t+1),className:"w-12 h-12 object-cover rounded",onError:e=>{e.target.src="/placeholder-image.jpg"}}),(0,l.jsx)("span",{className:"flex-1 text-sm text-gray-600 truncate",children:e}),(0,l.jsx)("button",{type:"button",onClick:()=>O(t),className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"제거"})]},t))]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-6",children:[(0,l.jsx)("button",{type:"button",onClick:()=>{y(!1),k(null)},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"취소"}),(0,l.jsx)("button",{type:"submit",className:"px-6 py-2 bg-[#66ae7d] text-white rounded-md hover:bg-[#497e56] transition-colors",children:"수정하기"})]})]})]})})}),v&&w&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,l.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"행사 삭제"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"이 작업은 되돌릴 수 없습니다."})]})]}),(0,l.jsxs)("p",{className:"text-gray-700 mb-6",children:[(0,l.jsxs)("strong",{children:['"',w.title,'"']})," 행사를 정말 삭제하시겠습니까?"]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,l.jsx)("button",{onClick:()=>{N(!1),k(null)},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"취소"}),(0,l.jsx)("button",{onClick:U,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"삭제하기"})]})]})})}),z&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:G,children:(0,l.jsxs)("div",{className:"relative max-w-7xl max-h-full w-full h-full flex items-center justify-center p-4",children:[(0,l.jsx)("button",{onClick:G,className:"absolute top-4 right-4 text-white hover:text-gray-300 text-2xl z-10",title:"닫기 (ESC)",children:"\xd7"}),B.length>1&&(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),Z("prev")},className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-300 text-4xl z-10",title:"이전 이미지 (←)",children:"‹"}),B.length>1&&(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),Z("next")},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-300 text-4xl z-10",title:"다음 이미지 (→)",children:"›"}),(0,l.jsxs)("div",{className:"relative max-w-full max-h-full",children:[(0,l.jsx)("img",{src:z,alt:"이미지 ".concat(T+1),className:"max-w-full max-h-full object-contain",onClick:e=>e.stopPropagation(),onError:e=>{e.target.src="/placeholder-image.jpg"}}),(0,l.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-60 px-4 py-2 rounded-lg",children:(0,l.jsxs)("span",{children:[T+1," / ",B.length]})})]})]})})]})}}},e=>{e.O(0,[135,965,844,670,86,156,687,441,964,358],()=>e(e.s=5278)),_N_E=e.O()}]);